<!DOCTYPE html> 
<html lang="en">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>MEMORY v1.0</title>

    <!-- Bootstrap -->
	
    <!-- <link href="css/bootstrap.min.css" rel="stylesheet">  -->
	<link href="css/cerulean.bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./bootstrap.css" media="screen">
    <link rel="stylesheet" href="../assets/css/bootswatch.min.css">
	

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
		<script type="text/javascript">
			var imagesPath = "images/";
			var imag = [
			"w1.jpg", "w2.jpg", "w3.jpg", "w4.jpg", "w5.jpg", "w6.png", "w7.jpg", "w8.jpg", "w9.png", "w10.jpg",
			"w11.jpg", "w12.jpg", "w13.jpg", "w14.jpg", "w15.jpg", "w16.jpg", "w17.jpg", "w18.png", "w19.jpg",			"w20.jpg",
			"w21.jpg", "w22.jpg", "w23.jpg", "w24.jpg", "w25.jpg", "w26.jpg", "w27.jpg", "w28.jpg", "w29.jpg",
			"w30.jpg", "w31.jpg", "w32.jpg"
			];
			
			function getRndNumber(min, max){
				return Math.floor((Math.random() * ((max-min)+1)) + min); 
 			}
			
			function cheat(){
				if(document.getElementById("myCheck").checked == true){
					for(i=0; i<nbcases; i++){
						var i1=document.getElementById("img"+i);
//ep.innerHTML+=i1.style.opacity+"<br>";						
						if(i1.style.opacity =='0') i1.style.opacity ='0.15';
					}
				}
				else{
					for(i=0; i<nbcases; i++){
						var i1=document.getElementById("img"+i);
						if(i1.style.opacity !='1') i1.style.opacity ='0';
					}
				}
			}
			function parcours(casenum){
				// OPERATION A EFFECTUER AU SURVOL DE LA SOURIS
			}

			function efface(casenum,toggleclic){
					//ep.innerHTML+="efface()"+casenum+"/"+toggleclic+"<br>";					
				var i1=document.getElementById("img"+casenum);
				var i2=document.getElementById("img"+toggleclic);
				i1.style.opacity='0'; 
				i2.style.opacity='0';
			}									
			
			function joue(casenum){
				var i1=document.getElementById("img"+casenum);
				if(i1.style.opacity!='1'){
						if(toggleclic==-1){
							toggleclic=casenum;
							i1.style.opacity='1';
							}
						else{
							if(toggleclic != casenum){
								var i2=document.getElementById("img"+toggleclic);
								if(i1.src == i2.src){
									i1.style.opacity='1';
								}
								else{
									i1.style.opacity='1'; i2.style.opacity='1';
									setTimeout('efface('+casenum+','+toggleclic+')',1000);
								}
								toggleclic=-1;
							}
						}
					}
				var partifini=1;
				for(i=0; i<nbcases; i++){
					var i1=document.getElementById("img"+i);
					if(i1.style.opacity!='1') partifini=0;
				}
				if(partifini==1){
					ep.innerHTML += "Memory "+document.getElementById("select_id").value+" cases termine en "+document.forsec.secb.value+":"+document.forsec.seca.value+":"+document.forsec.secc.value+"<br>";
					alert(" BRAVO !");
					initialise_tableau();
				}
			}
			function initialise_tableau(){
				chrono(-1);
				document.getElementById("myCheck").checked = false;
				nbcases=document.getElementById("select_id").value;
				var i=0, j=0, nbtr=0, nbtd=0, tmp=0, rndnum=0;
				var tableau_img = new Array();
				var tableau_positions = new Array();
				
				// Initialisation d'un tableau contenant les positions 0 à 15
				for(i=0; i<nbcases; i++){
					tableau_positions[i]=i;
				}
				// Mélange du tableau pour obtenir des positions aléatoires
				for(i=0; i<nbcases; i++){
					rndnum=getRndNumber(0,nbcases-1);
					tmp=tableau_positions[i];
					tableau_positions[i]=tableau_positions[rndnum];
					tableau_positions[rndnum]=tmp;
				}
				j=0;
				for(i=0; i<nbcases; i++){
					tableau_img[tableau_positions[i]]=imag[j];
					j++;
					if(j>=nbcases/2) j=0;
					}
				
				var tmp2 ="<br/><h1>M E M O R Y</h1><br/>";
				tmp2 += '<table border="2px"><tr>';
				for(i=0; i<nbcases; i++){
					tmp2 += '<td>';
					//var img0='<img id="img'+i+'" src="'+tableau_img[i]+'" style="opacity:0.0" onclick="joue('+i+')">';
					var img0='<img id="img'+i+'" src="'+imagesPath+tableau_img[i]+'" style="opacity:0" onclick="joue('+i+')" onmouseover="parcours('+i+')" onmousedown="return false;">';
					tmp2 += img0;
					tmp2 += '</td>';
					nbtd++; if(nbtd>=Math.sqrt(nbcases)){
						tmp2 += '</tr><tr>';
						nbtd=0; nbtr++;
					}
				}
				tmp2 += '</tr></table><br><br>';
				e2.innerHTML = tmp2;
				// txb.value = "CODE HTML GENERE VIA JAVASCRIPT:  "+tmp2;  // PERMET D'AFFICHER DANS UN TEXTAREA LE CODE HTML CREE POUR LA PAGE
			}
			
			var centi=0 // initialise les centièmes
			var dixi=0  // initialise les dixièmes
			 var secon=0 //initialise les secondes
			 var minu=0 //initialise les minutes

			 function chrono(raz){
			 if(raz==-1){
				centi=0; dixi=0; secon=0; minu=0; raz=0;
			 }
			 
			 dixi++; //incrémentation des dixièmes de 1
			 if (dixi>9){dixi=0;secon++} //si les dixaines > 9, on les réinitialise à 0 et on incrémente les secondes de 1
			 if (secon>59){secon=0;minu++} //si les secondes > 59, on les réinitialise à 0 et on incrémente les minutes de 1
			 document.forsec.secc.value=" "+dixi //on affiche les dixièmes
			 document.forsec.seca.value=" "+secon //on affiche les secondes
			 document.forsec.secb.value=" "+minu //on affiche les minutes
			// var compte=setTimeout('chrono()',100) //la fonction est relancée tous les 10° de secondes
			 }
			 var compte=setInterval('chrono()',100); //la fonction est relancée tous les dizieme de seconde
			
			
		</script>	
</head>
	<body>
		<div align="center" id="clicDiv" style="border: 1px solid black;">
		</div>
		<div align="center" class="alert alert-dismissible alert-warning" abp="662">
			<h1><select id="select_id" onchange="initialise_tableau();" class="form-control" abp="450" width="200px" ><option value="16">4 x 4</option><option value="36">6 x 6</option><option value="64">8 x 8</option></select></h1>
		</div>

		<form name="forsec" class="form-horizontal" abp="419">
		<input type="text" size="3" name="secb"> minute(s)
		<input type="text" size="3" name="seca"> secondes
		<input type="text" size="3" name="secc"> dixiemes
		</form>
		<input id="myCheck" type="checkbox" onchange="cheat();"> <b>Cheat</b>
		
		<div id="printDiv" style="border: 1px solid black;" class="alert alert-dismissible alert-warning" abp="662"></div>
		<textarea id="textbox1" rows="10" cols="130"></textarea>
		<script type="text/javascript">
			var e2 = document.getElementById("clicDiv");
			var ep = document.getElementById("printDiv");
			var tmpep="";
			var txb = document.getElementById("textbox1");
			var toggleclic=-1;
			var nbcases=16;
			initialise_tableau();
		</script>	
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="js/bootstrap.min.js"></script>		
	</body>
</html>

